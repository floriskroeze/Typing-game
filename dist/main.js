var n=(t=>(t.START="start-screen",t.SETTINGS="settings",t.GAMEBOARD="gameboard",t.END="end-screen",t))(n||{});const r=t=>(document==null?void 0:document.getElementById(t))??null,i=t=>{var e;(e=r(t))==null||e.classList.remove("hidden")},d=t=>{var e;(e=r(t))==null||e.classList.add("hidden")};async function u(t){console.log("Selecting game text with difficulty: "+t);const e=await f(),o=m(e.gameTexts,t);return S(E(o))}const f=async()=>fetch("src/data.json").then(t=>{if(!t.ok)throw new Error("Could not fetch game text.");return t.json()}),m=(t,e)=>t==null?void 0:t.filter(o=>o.difficulty===e),E=t=>t[Math.floor(Math.random()*t.length)].text,S=t=>h(t.split(" ")),h=t=>t.flatMap(e=>[e," "]);function g(t){t.forEach((e,o)=>{var a;const c=(a=r(n.GAMEBOARD))==null?void 0:a.querySelector(".words-wrapper"),s=T();o===0&&s.classList.add("active"),e.split("").forEach(l=>s.appendChild(p(l))),c==null||c.appendChild(s)})}const T=()=>{const t=document.createElement("div");return t.classList.add("word"),t},p=t=>{const e=document.createElement("letter");return e.classList.add("letter"),e.innerText=t,e};function w(){document.body.addEventListener("click",t=>{t.preventDefault(),document.body.focus()}),document==null||document.body.addEventListener("keydown",y),console.log("Input initiated")}const y=t=>{t.preventDefault(),console.log(t)};function A(t){if(!t)throw new Error("No settings were selected.");if(!r(n.GAMEBOARD))throw new Error("Gameboard not found.");console.log("Initialising gameboard with settings: Difficulty: "+t.difficulty+". Time: "+t.gameLength+"."),u(t.difficulty).then(e=>{g(e),i(n.GAMEBOARD)}),w(),G()}const G=t=>{console.log("Game clock initiated")},L={difficulty:2,gameLength:10};function v(){if(!r(n.SETTINGS))throw new Error("Settings screen not found.");i(n.SETTINGS),console.log("Settings screen initiated"),console.log("Settings selected"),A(L),d(n.SETTINGS)}function D(){if(!r(n.START))throw new Error("Start screen not found.");R(),i(n.START)}const R=()=>{var e;const t=(e=r(n.START))==null?void 0:e.querySelector("button#start");if(!t)throw new Error("Start button not found.");t.addEventListener("click",o=>{o.preventDefault(),v(),d(n.START)})};D();
